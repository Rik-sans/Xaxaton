import streamlit as st
import os

st.title("ü§ñ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –±–æ—Ç")
st.write("–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –±–æ—Ç—É, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –≤ –±—ã—Ç–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö:")
col1, col2 = st.columns(2)

# –ò–º–∏—Ç–∞—Ü–∏—è –±–æ—Ç–∞
with col1:
    st.write('')
    user_input = st.chat_input("–ù–∞–ø—Ä–∏–º–µ—Ä: '–ö–∞–∫ –ø–æ—á–∏—Å—Ç–∏—Ç—å –º–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫—É?'")

if user_input:
    with st.chat_message("user"):
        st.write(user_input)

    # –ü—Ä–æ—Å—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã –±–æ—Ç–∞ (–º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, OpenAI API)
    bot_responses = {
        "–∫–∞–∫ –ø–æ—á–∏—Å—Ç–∏—Ç—å –º–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫—É": "–ù–∞–ª–µ–π—Ç–µ –≤ –º–∏—Å–∫—É –≤–æ–¥—É —Å –ª–∏–º–æ–Ω–Ω—ã–º —Å–æ–∫–æ–º, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –≤ –º–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫—É –Ω–∞ 5 –º–∏–Ω—É—Ç –Ω–∞ –≤—ã—Å–æ–∫–æ–π –º–æ—â–Ω–æ—Å—Ç–∏, –∑–∞—Ç–µ–º –ø—Ä–æ—Ç—Ä–∏—Ç–µ –≥—É–±–∫–æ–π.",
        "—Ä–µ—Ü–µ–ø—Ç –±–ª–∏–Ω–æ–≤": "–°–º–µ—à–∞–π—Ç–µ 1 —Å—Ç–∞–∫–∞–Ω –º—É–∫–∏, 1 —è–π—Ü–æ, 1 —Å—Ç.–ª. —Å–∞—Ö–∞—Ä–∞, 300 –º–ª –º–æ–ª–æ–∫–∞ –∏ —â–µ–ø–æ—Ç–∫—É —Å–æ–ª–∏. –ñ–∞—Ä—å—Ç–µ –Ω–∞ —Å–∫–æ–≤–æ—Ä–æ–¥–µ –±–µ–∑ –º–∞—Å–ª–∞.",
        "–∫–∞–∫ —É–±—Ä–∞—Ç—å –ø—è—Ç–Ω–æ": "–ù–∞–Ω–µ—Å–∏—Ç–µ –Ω–∞ –ø—è—Ç–Ω–æ —Å–º–µ—Å—å —Å–æ–¥—ã –∏ —É–∫—Å—É—Å–∞, –æ—Å—Ç–∞–≤—å—Ç–µ –Ω–∞ 10 –º–∏–Ω—É—Ç, –∑–∞—Ç–µ–º –ø–æ—Å—Ç–∏—Ä–∞–π—Ç–µ."
    }

    answer = bot_responses.get(user_input.lower(), "–Ø –º–æ–≥—É –ø–æ–º–æ—á—å —Å —Ä–µ—Ü–µ–ø—Ç–∞–º–∏, —É–±–æ—Ä–∫–æ–π –∏ –¥—Ä—É–≥–∏–º–∏ –±—ã—Ç–æ–≤—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É—Ç–æ—á–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å.")

    with st.chat_message("assistant"):
        st.write(answer)
with col2:
    uploaded_file = st.file_uploader("")

if uploaded_file is not None:
    # –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É uploads, –µ—Å–ª–∏ –µ–µ –Ω–µ—Ç
    if not os.path.exists("uploads"):
        os.makedirs("uploads")
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–∞–π–ª
    file_path = os.path.join("uploads", uploaded_file.name)
    with open(file_path, "wb") as f:
        f.write(uploaded_file.getbuffer())
    
    st.success(f"–§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω: {file_path}")